<!-- User Profile Header -->
<div fxLayout="row" fxLayoutAlign="start center" class="user-profile-header">
  <mat-icon>home</mat-icon>
  <h1><strong>毛毛購物</strong></h1>
  <h1><strong>|</strong></h1>
  <h1><strong>幫助中心</strong></h1>
</div>

<div fxLayout="row" class="main-container" fxLayoutAlign="center center">
  <!-- 左側選單 -->
  <mat-sidenav-container class="sidenav-container" fxFlex="80">
    <mat-sidenav mode="side" opened>
      <mat-nav-list>
        <mat-list-item (click)="toggleForm(true)">
          <mat-icon matListIcon>person</mat-icon>
          <span matLine>個人檔案</span>
        </mat-list-item>
        <mat-list-item (click)="toggleForm(false)">
          <mat-icon matListIcon>lock</mat-icon>
          <span matLine>更改密碼</span>
        </mat-list-item>
      </mat-nav-list>
    </mat-sidenav>

    <!-- 主要內容 -->
    <mat-sidenav-content>
      <div class="user-profile-container" fxLayout="column" fxLayoutAlign="center center">
        <mat-card class="user-profile-card" *ngIf="showProfile">
          <form [formGroup]="userProfileForm" (ngSubmit)="onSubmit()">
            <mat-form-field appearance="fill">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email">
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>姓名</mat-label>
              <input matInput formControlName="name">
            </mat-form-field>
            <mat-radio-group formControlName="gender">
              <mat-radio-button *ngFor="let gender of genders" [value]="gender">{{ gender }}</mat-radio-button>
            </mat-radio-group>
            <div fxLayout="row" fxLayoutGap="10px">
              <mat-form-field appearance="fill" fxFlex="30">
                <mat-label>出生日</mat-label>
                <mat-select formControlName="day">
                  <mat-option *ngFor="let day of days" [value]="day">{{ day }}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field appearance="fill" fxFlex="30">
                <mat-label>出生月</mat-label>
                <mat-select formControlName="month">
                  <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field appearance="fill" fxFlex="40">
                <mat-label>出生年</mat-label>
                <mat-select formControlName="year">
                  <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <button mat-raised-button color="primary" type="submit" [disabled]="!userProfileForm.valid">
              儲存
            </button>
          </form>
        </mat-card>

        <mat-card class="user-profile-card" *ngIf="!showProfile">
          <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePasswordSubmit()">
            <mat-form-field appearance="fill">
              <mat-label>密碼</mat-label>
              <input matInput type="password" formControlName="password" required>
              <mat-error *ngIf="changePasswordForm.get('password')?.hasError('required')">
                請輸入密碼
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>確認密碼</mat-label>
              <input matInput type="password" formControlName="confirmPassword" required>
              <mat-error *ngIf="!changePasswordMatch">
                密碼不匹配
              </mat-error>
              <mat-error *ngIf="changePasswordForm.get('confirmPassword')?.hasError('required')">
                請輸入確認密碼
              </mat-error>
            </mat-form-field>
            <button mat-raised-button color="primary" type="submit" [disabled]="!changePasswordForm.valid || !changePasswordMatch">
              儲存
            </button>
          </form>
        </mat-card>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
